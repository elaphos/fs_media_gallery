.. ==================================================
.. FOR YOUR INFORMATION
.. --------------------------------------------------
.. -*- coding: utf-8 -*- with BOM.

.. include:: ../Includes.txt

.. _changelog_0-0-6:

Version 0.0.6 - 2014/00/00
==========================

This is a major upgrade introducing lots of new features.
Read and follow the section :ref:`Upgrade procedure <upgrade_procedure_0-0-6>` carefully!


.. _upgrade_procedure_0-0-6:

Upgrade procedure
-----------------

todo: describe upgrade procedure

This version adds and alters database tables. The easiest way to apply these changes is to de-install an re-install the
extension in Extension Manager. To do this from command line use:

.. code:: bash

    cd /your/path/to/typo3root/
    ./typo3/cli_dispatch.phpsh extbase extension:uninstall fs_media_gallery
    ./typo3/cli_dispatch.phpsh extbase extension:install fs_media_gallery


.. _important_changes_0-0-6:

Important changes
-----------------

A lot of code changed in this version. Therefore it is very likely that the update is not done in only one minute.
The most important changes are:

.. todo: add link to file Classes/Hooks/ItemProcFuncHook.php if one codebase is reached

* ``gallery`` was renamed to ``album`` in most places

* ``image`` was renamed to ``media asset`` in most places

* TypoScript paths and values have been reordered and renamed and some new features were added (see `TypoScript changes`_)

* Empty flexform field can be overwritten by TypoScript (see :ref:`settings.overrideFlexformSettingsIfEmpty <plugin.tx_fsmediagallery.settings.overrideFlexformSettingsIfEmpty>`)

* Plugin flexform has changed a lot (todo: upgrade script);
  new :ref:`Display Modes <flexforms.mediagallery.tabs.general.displayMode>` (``switchableControllerActions``)
  ``nestedList`` (former default action), ``flatList``, ``showAlbum`` and ``showAlbumByConfig``

* :ref:`Display Modes <flexforms.mediagallery.tabs.general.displayMode>` (``switchableControllerActions``) can be removed in plugin via :ref:`Extension Manager <configuration-extConf>` (see ``Classes/Hooks/ItemProcFuncHook.php``)

* New option ``resizeMode`` for media assets and thumbnail images for all display modes

* Default media asset dimensions orient on 1080i (widescreen aspect ratio of 16:9)

* Translation key have been reordered and renamed

* Field "Date" was added to FAL file collections (adds field ``datetime`` to database table ``sys_file_collection``)

* EXT:fs_media_gallery now integrates into EXT:news (alters database table ``tx_news_domain_model_news``, adds table ``tx_news_domain_model_news_fsmediaalbums_mm``)


.. _typoscript_changes_0-0-6:

TypoScript changes
------------------

All settings are defined by using :typoscript:`plugin.tx_fsmediagallery.<property>`.


.. t3-field-list-table::
 :header-rows: 1

 - :oldProperty,25:    Property in 0.0.5
   :status,20:         Alteration
   :newProperty,25:    Property in 0.0.6
   :proposal,30:       Proposal

 - :oldProperty:    view.templateRootPaths.100
   :status:         not changed
   :newProperty:    view.\
                    :ref:`templateRootPaths.100 <plugin.tx_fsmediagallery.view.templateRootPaths.100>`

 - :oldProperty:    view.partialRootPaths.100
   :status:         not changed
   :newProperty:    view.\
                    :ref:`partialRootPaths.100 <plugin.tx_fsmediagallery.view.partialRootPaths.100>`

 - :oldProperty:    view.layoutRootPaths.100
   :status:         not changed
   :newProperty:    view.\
                    :ref:`layoutRootPaths.100 <plugin.tx_fsmediagallery.view.layoutRootPaths.100>`

 - :oldProperty:    persistence.storagePid
   :status:         not changed
   :newProperty:    persistence.\
                    :ref:`storagePid <plugin.tx_fsmediagallery.persistence.storagePid>`

 - :oldProperty:
   :status:         new
   :newProperty:    persistence.\
                    :ref:`recursive <plugin.tx_fsmediagallery.persistence.recursive>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.\
                    :ref:`overrideFlexformSettingsIfEmpty <plugin.tx_fsmediagallery.settings.overrideFlexformSettingsIfEmpty>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.\
                    :ref:`allowedAssetMimeTypes <plugin.tx_fsmediagallery.settings.allowedAssetMimeTypes>`

 - :oldProperty:    settings.mediagalleries
   :status:         renamed
   :newProperty:    settings.\
                    :ref:`mediaAlbums <plugin.tx_fsmediagallery.settings.mediaAlbums>`
   :proposal:       mediaAlbumsUids

 - :oldProperty:    settings.useAlbumFilterAsExclude
   :status:         value altered
   :newProperty:    settings.\
                    :ref:`useAlbumFilterAsExclude <plugin.tx_fsmediagallery.settings.useAlbumFilterAsExclude>`

 - :oldProperty:    settings.album.itemsPerPage
   :status:         moved
   :newProperty:    settings.list.\
                    :ref:`itemsPerPage <plugin.tx_fsmediagallery.settings.list.itemsPerPage>`
   :proposal:       move to ``settings.list.paginate.itemsPerPage``

 - :oldProperty:    settings.album.thumb.maxWidth
   :status:         moved, renamed, value altered
   :newProperty:    settings.list.thumb.\
                    :ref:`width <plugin.tx_fsmediagallery.settings.list.thumb.width>`

 - :oldProperty:    settings.album.thumb.maxHeight
   :status:         moved, renamed, value altered
   :newProperty:    settings.list.thumb.\
                    :ref:`height <plugin.tx_fsmediagallery.settings.list.thumb.height>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.list.thumb.\
                    :ref:`resizeMode <plugin.tx_fsmediagallery.settings.list.thumb.resizeMode>`
   :proposal:       rename to ``scaleMode``

 - :oldProperty:
   :status:         new
   :newProperty:    settings.list.\
                    :ref:`hideEmptyAlbums <plugin.tx_fsmediagallery.settings.list.hideEmptyAlbums>`

 - :oldProperty:    settings.skipGalleryWhenOneAlbum
   :status:         renamed, moved
   :newProperty:    settings.list.\
                    :ref:`skipListWhenOnlyOneAlbum <plugin.tx_fsmediagallery.settings.list.skipListWhenOnlyOneAlbum>`

 - :oldProperty:    settings.image.itemsPerPage
   :status:         moved
   :newProperty:    settings.album.\
                    :ref:`itemsPerPage <plugin.tx_fsmediagallery.settings.album.itemsPerPage>`
   :proposal:       move to ``settings.album.paginate.itemsPerPage``

 - :oldProperty:    settings.image.thumb.maxWidth
   :status:         moved, renamed, value altered
   :newProperty:    settings.album.thumb.\
                    :ref:`width <plugin.tx_fsmediagallery.settings.album.thumb.width>`

 - :oldProperty:    settings.image.thumb.maxHeight
   :status:         moved, renamed, value altered
   :newProperty:    settings.album.thumb.\
                    :ref:`height <plugin.tx_fsmediagallery.settings.album.thumb.height>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.album.thumb.\
                    :ref:`resizeMode <plugin.tx_fsmediagallery.settings.album.thumb.resizeMode>`
   :proposal:       rename to ``scaleMode``

 - :oldProperty:    settings.enableLightbox
   :status:         renamed, moved
   :newProperty:    settings.album.lightbox.\
                    :ref:`enable <plugin.tx_fsmediagallery.settings.album.lightbox.enable>`


 - :oldProperty:
   :status:         new
   :newProperty:    settings.album.lightbox.\
                    :ref:`styleClass <plugin.tx_fsmediagallery.settings.album.lightbox.styleClass>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.album.lightbox.\
                    :ref:`relPrefix <plugin.tx_fsmediagallery.settings.album.lightbox.relPrefix>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.album.lightbox.\
                    :ref:`jsPlugin <plugin.tx_fsmediagallery.settings.album.lightbox.jsPlugin>`

 - :oldProperty:    settings.image.lightbox.maxWidth
   :status:         moved, renamed, value altered
   :newProperty:    settings.album.lightbox.asset.\
                    :ref:`width <plugin.tx_fsmediagallery.settings.album.lightbox.asset.width>`

 - :oldProperty:    settings.image.lightbox.maxHeight
   :status:         moved, renamed, value altered
   :newProperty:    settings.album.lightbox.asset.\
                    :ref:`height <plugin.tx_fsmediagallery.settings.album.lightbox.asset.height>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.album.lightbox.asset.\
                    :ref:`resizeMode <plugin.tx_fsmediagallery.settings.album.lightbox.asset.resizeMode>`
   :proposal:       rename to ``scaleMode``

 - :oldProperty:    settings.image.maxWidth
   :status:         moved, renamed, value altered
   :newProperty:    settings.detail.asset.\
                    :ref:`width <plugin.tx_fsmediagallery.settings.detail.asset.width>`

 - :oldProperty:    settings.image.maxHeight
   :status:         moved, renamed, value altered
   :newProperty:    settings.detail.asset.\
                    :ref:`height <plugin.tx_fsmediagallery.settings.detail.asset.height>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.detail.asset.\
                    :ref:`resizeMode <plugin.tx_fsmediagallery.settings.detail.asset.resizeMode>`
   :proposal:       rename to ``scaleMode``

 - :oldProperty:    settings.galleryPid
   :status:         moved, renamed
   :newProperty:    settings.random.\
                    :ref:`targetPid <plugin.tx_fsmediagallery.settings.random.targetPid>`

 - :oldProperty:    settings.random.thumb.maxWidth
   :status:         renamed, value altered
   :newProperty:    settings.random.thumb.\
                    :ref:`width <plugin.tx_fsmediagallery.settings.random.thumb.width>`

 - :oldProperty:    settings.random.thumb.maxHeight
   :status:         renamed, value altered
   :newProperty:    settings.random.thumb.\
                    :ref:`height <plugin.tx_fsmediagallery.settings.random.thumb.height>`

 - :oldProperty:
   :status:         new
   :newProperty:    settings.random.thumb.\
                    :ref:`resizeMode <plugin.tx_fsmediagallery.settings.random.thumb.resizeMode>`
   :proposal:       rename to ``scaleMode``

 - :oldProperty:    settings.pagination.insertAbove
   :status:         no change
   :newProperty:    settings.pagination.\
                    :ref:`insertAbove <plugin.tx_fsmediagallery.settings.pagination.insertAbove>`
   :proposal:       divide into ``settings.list.paginate.itemsPerPage`` and ``settings.album.paginate.itemsPerPage``

 - :oldProperty:    settings.pagination.insertBelow
   :status:         no change
   :newProperty:    settings.pagination.\
                    :ref:`insertBelow <plugin.tx_fsmediagallery.settings.pagination.insertBelow>`
   :proposal:       divide into ``settings.list.paginate.insertBelow`` and ``settings.album.paginate.insertBelow``

 - :oldProperty:    settings.pagination.pagesBefore
   :status:         no change
   :newProperty:    settings.pagination.\
                    :ref:`pagesBefore <plugin.tx_fsmediagallery.settings.pagination.pagesBefore>`
   :proposal:       divide into ``settings.list.paginate.pagesBefore`` and ``settings.album.paginate.pagesBefore``

 - :oldProperty:    settings.pagination.pagesAfter
   :status:         no change
   :newProperty:    settings.pagination.\
                    :ref:`pagesAfter <plugin.tx_fsmediagallery.settings.pagination.pagesAfter>`
   :proposal:       divide into ``settings.list.paginate.pagesAfter`` and ``settings.album.paginate.pagesAfter``

 - :oldProperty:    settings.pagination.maximumNumberOfLinks
   :status:         no change
   :newProperty:    settings.pagination.\
                    :ref:`maximumNumberOfLinks <plugin.tx_fsmediagallery.settings.pagination.maximumNumberOfLinks>`
   :proposal:       divide into ``settings.list.paginate.maximumNumberOfLinks`` and ``settings.album.paginate.maximumNumberOfLinks``; rename to ``numberOfLinks``

 - :oldProperty:    settings.features.skipDefaultArguments
   :status:         no change
   :newProperty:    settings.features.\
                    :ref:`skipDefaultArguments <plugin.tx_fsmediagallery.settings.features.skipDefaultArguments>`
   :proposal:       `Extbase feature <https://forge.typo3.org/projects/typo3v4-mvc/wiki/Skip_default_arguments_in_URIs>`_ that can't be changed
